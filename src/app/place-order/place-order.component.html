<div class="row">
  <div class="col m12">
    <h6><b> Rent Now </b></h6>
  </div>
</div>
<div class="row">
  <div class="col s12 m4">
    <div class="card">
      <div class="card-image">
        <img [src]="product_item?.imageUrl" />
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col s6 m8 description">
    <div class="row">
      <div class="col m6">
        <h5>{{ product_item?.productName }} {{ product_item?.actualName }}</h5>
      </div>
    </div>
  </div>
</div>

<!--Place order form-->
<div class="row">
  <form class="col s12 m6" (submit)="onSubmit()" #rentForm="ngForm">
    <div class="row">
      <h6><b>Rent Details</b></h6>
      <hr />
    </div>
    <div class="row">
      <div class="col s12 m12">
        <div class="row">
          <div class="col m3">Product Name</div>
          <div class="col m6">
            {{ product_item?.productName }} {{ product_item?.actualName }}
          </div>
        </div>
        <div class="row">
          <div class="col m3">Description</div>
          <div class="col m6">{{ product_item?.assetDescription }}</div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col s12 input-field">
        <select
          #rent_mode="ngModel"
          class="validate browser-default"
          id="rent_mode"
          [(ngModel)]="newOrder.rent_mode"
          name="rent_mode"
          required
        >
          <option value="" disabled selected>Choose rent mode</option>
          <option value="per hour">Hourly</option>
          <option value="per day">Daily</option>
          <option value="per week">Weekly</option>
          <option value="per month">Monthly</option>
        </select>
        <small *ngIf="rent_mode.invalid" style="color: red"
          >Please select a rent mode</small
        >
      </div>
    </div>
    <div class="row">
      <div class="col s12 input-field">
        <label for="units">Units</label>
        <input
          type="number"
          class="validate"
          id="units"
          #units="ngModel"
          [(ngModel)]="newOrder.units"
          name="units"
          value="1"
          min="1"
          [max]="product_item?.units"
          required
        />
        <p>
          <b>Units available: {{ product_item?.units }}</b>
        </p>
        <span
          class="helper-text"
          data-error="cannot exceed available units"
          data-success=""
        ></span>
      </div>
    </div>
    <div class="row">
      <div class="col s12">
        <label for="start">Start Datetime</label>
        <div class="row">
          <div class="col m12 input-field">
            <input
              id="start"
              type="datetime-local"
              class="validate"
              #start
              [(ngModel)]="newOrder.start_datetime"
              name="start"
              [min]="today"
              required
            />
            <span class="helper-text" data-error="invalid" data-success="valid"
              >Required</span
            >
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col s12">
        <label for="end">End Datetime</label>
        <div class="row input-field">
          <div class="col m12">
            <input
              id="end"
              type="datetime-local"
              class="validate"
              [(ngModel)]="newOrder.end_datetime"
              name="end"
              [min]="newOrder.start_datetime"
              required
              (change)="
                calculateTotalPrice(
                  newOrder.start_datetime,
                  newOrder.end_datetime
                )
              "
            />
            <span class="" data-success="valid">Required</span>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col s6 m4">Total Amount:</div>
      <div class="col s6 m3">
        <b> {{ newOrder?.total_amount }} </b>
      </div>
    </div>

    <div class="row">
      <div class="col m12 input-field">
        <p>
          <label>
            <input
              type="checkbox"
              class="filled-in validate"
              [(ngModel)]="newOrder.terms_and_conditions"
              name="terms_and_conditions"
              required
            />

            <span>I have read the terms and conditions and I agree to it.</span>
          </label>
        </p>
      </div>
    </div>
    <div class="row" id="myPaypalButtons"></div>
    <div class="row">
      <div class="col m6 offset-m3">
        <button
          class="waves-effect btn"
          style="text-align: center"
          type="submit"
          [disabled]="!newOrder.terms_and_conditions && !rentForm.valid"
        >
          Place Order
        </button>
      </div>
    </div>
  </form>
  <div class="col m3 offset-m2">
    <div class="row">
      <h6><b>Pricing</b></h6>
      <hr />
      <div class="col s12">
        per hour - <b>Rs.{{ product_item?.pricePerHour }}</b>
      </div>
      <div class="col s12">
        per day - <b>Rs.{{ product_item?.pricePerDay }}</b>
      </div>
      <div class="col s12">
        per week - <b>Rs.{{ product_item?.pricePerWeek }}</b>
      </div>
      <div class="col s12">
        per month - <b>Rs.{{ product_item?.pricePerMonth }}</b>
      </div>
    </div>
    <div class="row">
      <h6><b>Pickup address</b></h6>
      <hr />
      <div class="col s12">
        <address>
          House no.{{ pickup_address?.houseNo }}, {{ pickup_address?.lane }} ,
          Street no.{{ pickup_address?.streetNo }}, near
          {{ pickup_address?.landmark }} , {{ pickup_address?.city }},
          {{ pickup_address?.district }} , {{ pickup_address?.state }}, PO -
          {{ pickup_address?.pincode }}
        </address>
      </div>
    </div>
  </div>
</div>
